id info.scce.cinco.product.scchart.mglid
stylePath "model/SCChart.style"

@event("info.scce.cinco.product.scchart.events.SCChartEvent")
graphModel SCChart {
	diagramExtension "scchart"
	containableElements(RootState[1,1])
}

@palette
@event("info.scce.cinco.product.scchart.events.RootStateEvent")
container RootState {
	style rootStateStyle ("${label}")
	containableElements(Region,RootStateDeclarationNode,SuspendNode)
	outgoingEdges (*)
	attr EString as label := "<insert name>"
	attr RootStateDeclaration as declaration[0,*]
	attr Suspend as suspends[0,*]
}

@palette("SuperStates")
@event("info.scce.cinco.product.scchart.events.RegionEvent")
container Region {
	style regionStyle ("${RegionID}")
	containableElements(SuperState,InitilalSuperState[0,1],InitialState[0,1],SimpleState,FinalState,Connector)
	attr EString as label := "<insert name>"
	attr EString as RegionID := "<insert name>"
	@propertiesViewHidden
	attr EString as uuid
}

@palette("Dataflow")
container DataFlowRegion extends Region {
	style regionStyle ("${RegionID}")
	containableElements(SuperState,InitilalSuperState[0,1],InitialState[0,1],SimpleState,FinalState,Connector)
}

@palette("SuperStates")
@event("info.scce.cinco.product.scchart.events.SuperStateEvent")
container SuperState {
	style superStateStyle ("${label}")
	containableElements(Region,SuperStateDeclarationNode,ActionNode,SuspendNode)
	incomingEdges (Transition,ImmediateTransition,TerminationTransition,ConditionalTerminationTransition,StrongAbortTransition,ImmediateStrongAbortTransition,DeferredTransition,ImmediateDeferredTransition,TerminationDefferdTransition,ConditionalTerminationDeferredTransition,StrongAbortDeferredTransition,ImmediateStrongAbortDeferredTransition,HistoryTransition,ImmediateHistoryTransition,TerminationHistoryTransition,ConditionalTerminationHistoryTransition,StrongAbortHistoryTransition,ImmediateStrongAbortHistoryTransition)
	outgoingEdges (Transition,ImmediateTransition,TerminationTransition,ConditionalTerminationTransition,StrongAbortTransition,ImmediateStrongAbortTransition,DeferredTransition,ImmediateDeferredTransition,TerminationDefferdTransition,ConditionalTerminationDeferredTransition,StrongAbortDeferredTransition,ImmediateStrongAbortDeferredTransition,HistoryTransition,ImmediateHistoryTransition,TerminationHistoryTransition,ConditionalTerminationHistoryTransition,StrongAbortHistoryTransition,ImmediateStrongAbortHistoryTransition)
	attr SuperStateDeclaration as declaration[0,*]
	attr Suspend as suspends[0,*] 
	attr Action as actions[0,*]
	attr EString as label := "<insert name>"
}

@palette("SuperStates")
@event("info.scce.cinco.product.scchart.events.InitilalSuperStateEvent")
container InitilalSuperState extends SuperState{
	style initialSuperStateStyle ("${label}")
	containableElements(Region,SuperStateDeclarationNode)
	incomingEdges (Transition,ImmediateTransition,TerminationTransition,ConditionalTerminationTransition,StrongAbortTransition,ImmediateStrongAbortTransition,DeferredTransition,ImmediateDeferredTransition,TerminationDefferdTransition,ConditionalTerminationDeferredTransition,StrongAbortDeferredTransition,ImmediateStrongAbortDeferredTransition,HistoryTransition,ImmediateHistoryTransition,TerminationHistoryTransition,ConditionalTerminationHistoryTransition,StrongAbortHistoryTransition,ImmediateStrongAbortHistoryTransition)
	outgoingEdges (Transition,ImmediateTransition,TerminationTransition,ConditionalTerminationTransition,StrongAbortTransition,ImmediateStrongAbortTransition,DeferredTransition,ImmediateDeferredTransition,TerminationDefferdTransition,ConditionalTerminationDeferredTransition,StrongAbortDeferredTransition,ImmediateStrongAbortDeferredTransition,HistoryTransition,ImmediateHistoryTransition,TerminationHistoryTransition,ConditionalTerminationHistoryTransition,StrongAbortHistoryTransition,ImmediateStrongAbortHistoryTransition)
}

@palette
@disable(select,delete)
node RootStateDeclarationNode {
	style declarationStyle("${InputOutput}", "${declarationType}","${name}")
	attr EString as inputOutput
	attr EString as declarationType
	attr EString as name
}


@palette
node SuspendNode {
	style suspendStyle("${(suspendType == ' ' ? ' ' : suspendType)}", "${(suspendType == ' ' ? ' ' : empty condition ? ' ' : condition)}")
	attr EString as suspendType := ' '
	attr EString as condition
}

@palette
node ActionNode {
	style declarationStyle("${InputOutput}", "${declarationType}","${name}")
	attr EString as inputOutput
	attr EString as declarationType
	attr EString as name
}

@palette
@disable(select,delete)
node SuperStateDeclarationNode {
	style subSuperStateDeclarationStyle("${declarationType}","${name}")
	attr EString as declarationType
	attr EString as name
}

@palette("States")
node SimpleState {
	style simpleStateStyle("${label}")
	incomingEdges (Transition,ImmediateTransition,TerminationTransition,ConditionalTerminationTransition,StrongAbortTransition,ImmediateStrongAbortTransition)
	outgoingEdges (Transition,ImmediateTransition)
	attr EString as label := "<insert name>"
}	

@palette("States")
node InitialState extends SimpleState {
	style startNodeStyle("${label}")
	incomingEdges (Transition,ImmediateTransition,TerminationTransition,ConditionalTerminationTransition,StrongAbortTransition,ImmediateStrongAbortTransition)
	outgoingEdges (Transition,ImmediateTransition)
}							

@palette("States")
node FinalState extends SimpleState {
	style finalStateStyle("${label}")
	incomingEdges (Transition,ImmediateTransition,TerminationTransition,ConditionalTerminationTransition,StrongAbortTransition,ImmediateStrongAbortTransition)
	outgoingEdges (Transition,ImmediateTransition)
}

@palette("States")
node Connector {
	style connectorStyle
	incomingEdges (Transition,ImmediateTransition,TerminationTransition,ConditionalTerminationTransition,StrongAbortTransition,ImmediateStrongAbortTransition)
	outgoingEdges (Transition,ImmediateTransition)
}

/*Transitions */
/*same as auto and delayed transition, weak abort for superstates*/
edge AbstractTransition{
	style connectionStyle
	@possibleValuesProvider("info.scce.cinco.product.scchart.provider.AbstractTransitionPriorityProvider")
	attr EString as priority := '0'
}
edge Transition extends AbstractTransition{
	style transitionStyle("${(priority == '0' ? ' ' : priority.concat(': ')).concat(empty delay || delay == '<No count delay>' ? '' : delay).concat(condition == '<No condition>' ? '' : ' ['.concat(condition).concat(']')).concat(effect == '<No effect>' ? '' : ' / '.concat(effect))}")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}

edge ImmediateTransition extends AbstractTransition{
	style immediateTransitionStyle("${(priority == '0' ? ' ' : priority.concat(': ')).concat(empty delay || delay == '<No count delay>' ? '' : delay).concat(condition == '<No condition>' ? '' : ' ['.concat(condition).concat(']')).concat(effect == '<No effect>' ? '' : ' / '.concat(effect))}")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}

/*unconditional Termination */
edge TerminationTransition extends AbstractTransition{
	style terminationTransitionStyle("${(priority == '0' ? ' ' : priority.concat(': ')).concat(effect == '<No effect>' ? '' : ' / '.concat(effect))}")
	//attr EString as priority := '0'
	attr EString as effect := '<No effect>'
}

edge ConditionalTerminationTransition extends AbstractTransition{
	style conditionalTerminationTransitionStyle("${(priority == '0' ? ' ' : priority.concat(': ')).concat(empty delay || delay == '<No count delay>' ? '' : delay).concat(condition == '<No condition>' ? '' : ' ['.concat(condition).concat(']')).concat(effect == '<No effect>' ? '' : ' / '.concat(effect))}")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}

/* immediate terminate superstate */
edge StrongAbortTransition extends AbstractTransition{
	style strongAbortTransitionStyle("${(priority == '0' ? ' ' : priority.concat(': ')).concat(empty delay || delay == '<No count delay>' ? '' : delay).concat(condition == '<No condition>' ? '' : ' ['.concat(condition).concat(']')).concat(effect == '<No effect>' ? '' : ' / '.concat(effect))}")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}

/* immediate terminate superstate */
edge ImmediateStrongAbortTransition extends AbstractTransition{
	style immediateStrongAbortTransitionStyle("${(priority == '0' ? ' ' : priority.concat(': ')).concat(empty delay || delay == '<No count delay>' ? '' : delay).concat(condition == '<No condition>' ? '' : ' ['.concat(condition).concat(']')).concat(effect == '<No effect>' ? '' : ' / '.concat(effect))}")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}

/* preempt all immediate behavior in target state */
edge DeferredTransition extends AbstractTransition{
	style deferredTransitionStyle("")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}

edge ImmediateDeferredTransition extends AbstractTransition{
	style immediateDeferredTransitionStyle("")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}  

edge TerminationDefferdTransition extends AbstractTransition{
	style terminationDeferredTransitionStyle("")
	//attr EString as priority := '0'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}

edge  ConditionalTerminationDeferredTransition extends AbstractTransition{
	style conditionalTerminationDeferredTransitionStyle("")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}

edge StrongAbortDeferredTransition extends AbstractTransition{
	style immediateStrongAbortDeferredTransitionStyle("")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}

edge ImmediateStrongAbortDeferredTransition extends AbstractTransition{
	style strongAbortDeferredTransitionStyle("")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
}

edge HistoryTransition extends AbstractTransition{
	style historyTransitionStyle("","${H}")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
	attr EBoolean as deepHistory
	@propertiesViewHidden
	attr EString as H := ""
}

edge ImmediateHistoryTransition extends AbstractTransition{
	style immediateHistoryTransitionStyle("","${H}")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
	attr EBoolean as deepHistory
	@propertiesViewHidden
	attr EString as H := ""
}

edge TerminationHistoryTransition extends AbstractTransition{
	style terminationHistoryTransitionStyle("","${H}")
	//attr EString as priority := '0'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
	attr EBoolean as deepHistory
	@propertiesViewHidden
	attr EString as H := ""
}

edge ConditionalTerminationHistoryTransition extends AbstractTransition{
	style conditionalTerminationHistoryTransitionStyle("","${H}")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
	attr EBoolean as deepHistory
	@propertiesViewHidden
	attr EString as H := ""
}

edge StrongAbortHistoryTransition extends AbstractTransition{
	style strongAbortHistoryTransitionStyle("","${H}")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
	attr EBoolean as deepHistory
	@propertiesViewHidden
	attr EString as H := ""
} 

edge ImmediateStrongAbortHistoryTransition extends AbstractTransition{
	style immediateStrongAbortHistoryTransitionStyle("","${H}")
	//attr EString as priority := '0'
	attr EString as condition := '<No condition>'
	attr EString as effect := '<No effect>'
	attr EString as delay := '<No count delay>'
	attr EBoolean as deepHistory
	@propertiesViewHidden
	attr EString as H := ""
} 

edge Connection {
	style connectionStyle
}


@label(name)
type RootStateDeclaration {
	@possibleValuesProvider("info.scce.cinco.product.scchart.provider.RootStateDeclarationInputOutputProvider")
	attr EString as InputOutput := ' '
	@possibleValuesProvider("info.scce.cinco.product.scchart.provider.RootStateDeclarationTypeProvider")
	attr EString as declarationType := "bool"
	attr EString as name
}

@label(name)
type SuperStateDeclaration {
	@possibleValuesProvider("info.scce.cinco.product.scchart.provider.SuperStateDeclarationTypeProvider")
	attr EString as declarationType := "bool"
	attr EString as name
}


@label(name)
type Suspend {
	@possibleValuesProvider("info.scce.cinco.product.scchart.provider.SuspendTypeProvider")
	attr EString as SuspendType := ' '
	attr EString as condition
	attr EString as name 
}

@label(name)
type Action {
	@possibleValuesProvider("info.scce.cinco.product.scchart.provider.ActionTypeProvider")
	attr EString as actionType := "entry"
	attr EString as condition 
	attr EString as effect
	attr EString as name 
}